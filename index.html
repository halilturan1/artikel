<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Almanca Artikel Sava≈üƒ±: 2 vs 2</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap');
        
        body {
            font-family: 'Fredoka', sans-serif;
            background-color: #4ade80;
            overflow: hidden; /* Kaydƒ±rmayƒ± engelle */
            touch-action: none; /* Mobilde zoom/scroll engelle */
            user-select: none; /* Metin se√ßimini engelle */
        }

        /* --- OYUN ALANI STƒ∞LLERƒ∞ --- */

        #game-scene {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: visible;
        }

        /* Halatƒ±n kendisi */
        .rope-container {
            position: absolute;
            height: 12px;
            width: 100%;
            z-index: 5;
            pointer-events: none;
        }

        .rope {
            position: absolute;
            top: 50%;
            left: 50%; /* JS ile g√ºncellenir */
            transform: translate(-50%, -50%);
            height: 14px;
            width: 250vw; /* Ekrandan ta≈üacak kadar uzun */
            background: repeating-linear-gradient(45deg, #d4a373, #d4a373 10px, #a98467 10px, #a98467 20px);
            border-radius: 6px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            transition: left 0.4s cubic-bezier(0.2, 0.6, 0.4, 1);
        }

        /* Halatƒ±n ortasƒ±ndaki d√ºƒü√ºm */
        .knot {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 30px;
            height: 30px;
            background-color: #ef4444; /* Kƒ±rmƒ±zƒ± ba≈ülar, ortaya g√∂re deƒüi≈üebilir */
            border: 4px solid #fff;
            border-radius: 50%;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        /* Takƒ±m Konteynerleri (Halatla beraber kayanlar) */
        .team-container {
            position: absolute;
            top: 50%;
            transform: translateY(-50%); /* Dikey ortalama */
            display: flex;
            transition: left 0.4s cubic-bezier(0.2, 0.6, 0.4, 1), right 0.4s cubic-bezier(0.2, 0.6, 0.4, 1);
            z-index: 15;
            pointer-events: none;
        }

        /* √á√∂p Adam (SVG) */
        .stickman {
            width: 60px; /* Mobilde varsayƒ±lan */
            height: 90px;
            overflow: visible;
            filter: drop-shadow(0 4px 2px rgba(0,0,0,0.2));
        }

        @media (min-width: 768px) {
            .stickman {
                width: 100px;
                height: 140px;
            }
        }

        /* √áekme Animasyonu */
        .stickman-body {
            transform-origin: 50% 100%; /* Ayaklardan b√ºk√ºl */
            animation: pull-action 1s infinite alternate ease-in-out;
        }

        .red-team-anim .stickman-body { animation-delay: 0s; }
        .red-team-anim:nth-child(2) .stickman-body { animation-delay: 0.2s; }

        .blue-team-anim .stickman-body { 
            animation: pull-action-blue 1s infinite alternate ease-in-out; 
        }
        .blue-team-anim:nth-child(2) .stickman-body { animation-delay: 0.2s; }

        @keyframes pull-action {
            0% { transform: rotate(5deg) skewX(5deg); }
            100% { transform: rotate(-25deg) skewX(-10deg); } /* Geriye yaslan */
        }

        @keyframes pull-action-blue {
            /* Mavi takƒ±m aynalanmƒ±≈ü olduƒüu i√ßin ters a√ßƒ± */
            0% { transform: scaleX(-1) rotate(5deg) skewX(5deg); }
            100% { transform: scaleX(-1) rotate(-25deg) skewX(-10deg); }
        }

        /* Efektler */
        .pop-in { animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes popIn { 0% { transform: scale(0.8); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }

        .shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake {
            10%, 90% { transform: translate3d(-2px, 0, 0); }
            20%, 80% { transform: translate3d(4px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-6px, 0, 0); }
            40%, 60% { transform: translate3d(6px, 0, 0); }
        }

        /* √áim Dokusu */
        .grass-pattern {
            background-image: radial-gradient(#86efac 15%, transparent 16%), radial-gradient(#86efac 15%, transparent 16%);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            opacity: 0.4;
        }
        
        /* Butonlar */
        .game-btn {
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }
    </style>
</head>
<body class="h-screen w-screen flex flex-col overflow-hidden bg-green-400">

    <div class="absolute inset-0 grass-pattern pointer-events-none"></div>

    <!-- √úST Bƒ∞LGƒ∞ PANELƒ∞ -->
    <header class="z-20 w-full p-2 flex justify-between items-center bg-white/60 backdrop-blur-md shadow-sm h-14 md:h-16 shrink-0 border-b border-white/50">
        <div class="flex items-center gap-2 pl-2">
            <div class="w-3 h-3 md:w-4 md:h-4 rounded-full bg-red-500 animate-pulse"></div>
            <span class="text-red-700 font-bold text-lg md:text-xl">KIRMIZI</span>
        </div>
        <div class="text-white font-black text-lg md:text-2xl tracking-widest drop-shadow-lg bg-black/10 px-4 py-1 rounded-full whitespace-nowrap">HALAT SAVA≈ûI</div>
        <div class="flex items-center gap-2 pr-2">
            <span class="text-blue-700 font-bold text-lg md:text-xl">MAVƒ∞</span>
            <div class="w-3 h-3 md:w-4 md:h-4 rounded-full bg-blue-600 animate-pulse"></div>
        </div>
    </header>

    <!-- ANA OYUN ALANI -->
    <main class="flex-grow w-full flex flex-col relative z-10 justify-start overflow-hidden">
        
        <!-- SORU KARTLARI -->
        <div class="flex justify-between w-full px-2 md:px-12 mt-2 md:mt-6 gap-2 shrink-0 relative z-30 h-28 md:h-40">
            <!-- Kƒ±rmƒ±zƒ± Soru -->
            <div id="red-card" class="w-1/2 max-w-md bg-white rounded-xl md:rounded-3xl border-b-4 md:border-b-8 border-red-500 shadow-xl p-2 flex flex-col items-center justify-center">
                <span class="text-[10px] md:text-xs font-bold text-red-400 uppercase tracking-widest mb-1">KIRMIZI</span>
                <div id="red-word" class="text-2xl md:text-4xl lg:text-5xl font-black text-gray-800 text-center break-words leading-tight">...</div>
            </div>

            <!-- VS -->
            <div class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center w-8 h-8 md:w-12 md:h-12 bg-yellow-400 rounded-full font-black text-yellow-800 shadow-lg border-2 border-white text-xs md:text-base">VS</div>

            <!-- Mavi Soru -->
            <div id="blue-card" class="w-1/2 max-w-md bg-white rounded-xl md:rounded-3xl border-b-4 md:border-b-8 border-blue-600 shadow-xl p-2 flex flex-col items-center justify-center">
                <span class="text-[10px] md:text-xs font-bold text-blue-400 uppercase tracking-widest mb-1">MAVƒ∞</span>
                <div id="blue-word" class="text-2xl md:text-4xl lg:text-5xl font-black text-gray-800 text-center break-words leading-tight">...</div>
            </div>
        </div>

        <!-- SAHNE (Karakterler ve Halat) -->
        <div id="game-scene" class="flex-grow relative">
            
            <!-- Orta √áizgi (Zemin) -->
            <div class="absolute top-0 bottom-0 w-1 md:w-2 bg-white/40 left-1/2 -translate-x-1/2 border-l border-r border-white/20 dashed z-0"></div>

            <!-- KIRMIZI TAKIM -->
            <div id="red-team" class="team-container" style="left: 10%;">
                <!-- Oyuncu 2 (Arkada) -->
                <svg class="stickman red-team-anim -mr-8 md:-mr-12 opacity-80" viewBox="0 0 100 150">
                    <g class="stickman-body">
                        <circle cx="50" cy="30" r="15" fill="#fecaca" stroke="#dc2626" stroke-width="6" />
                        <line x1="50" y1="45" x2="50" y2="100" stroke="#dc2626" stroke-width="6" stroke-linecap="round"/>
                        <path d="M50 60 L80 85" stroke="#dc2626" stroke-width="6" stroke-linecap="round" />
                        <path d="M50 100 L25 140 M50 100 L75 140" stroke="#dc2626" stroke-width="6" stroke-linecap="round" />
                    </g>
                </svg>
                <!-- Oyuncu 1 (√ñnde) -->
                <svg class="stickman red-team-anim" viewBox="0 0 100 150">
                    <g class="stickman-body">
                        <circle cx="50" cy="30" r="15" fill="#fff" stroke="#ef4444" stroke-width="6" />
                        <line x1="50" y1="45" x2="50" y2="100" stroke="#ef4444" stroke-width="6" stroke-linecap="round"/>
                        <path d="M50 60 L80 85" stroke="#ef4444" stroke-width="6" stroke-linecap="round" />
                        <path d="M50 100 L25 140 M50 100 L75 140" stroke="#ef4444" stroke-width="6" stroke-linecap="round" />
                    </g>
                </svg>
            </div>

            <!-- HALAT (Oyuncularƒ±n el hizasƒ±na g√∂re ayarlƒ±) -->
            <div class="rope-container" style="top: 52%;"> 
                <div id="rope-visual" class="rope">
                    <div id="knot-visual" class="knot flex items-center justify-center">
                        <div class="w-1.5 h-1.5 bg-white rounded-full opacity-50"></div>
                    </div>
                </div>
            </div>

            <!-- MAVƒ∞ TAKIM -->
            <div id="blue-team" class="team-container" style="right: 10%;">
                <!-- Oyuncu 1 (√ñnde) -->
                <svg class="stickman blue-team-anim z-10" viewBox="0 0 100 150">
                    <g class="stickman-body">
                        <circle cx="50" cy="30" r="15" fill="#fff" stroke="#2563eb" stroke-width="6" />
                        <line x1="50" y1="45" x2="50" y2="100" stroke="#2563eb" stroke-width="6" stroke-linecap="round"/>
                        <path d="M50 60 L80 85" stroke="#2563eb" stroke-width="6" stroke-linecap="round" />
                        <path d="M50 100 L25 140 M50 100 L75 140" stroke="#2563eb" stroke-width="6" stroke-linecap="round" />
                    </g>
                </svg>
                <!-- Oyuncu 2 (Arkada) -->
                <svg class="stickman blue-team-anim -ml-8 md:-ml-12 opacity-80" viewBox="0 0 100 150">
                    <g class="stickman-body">
                        <circle cx="50" cy="30" r="15" fill="#bfdbfe" stroke="#3b82f6" stroke-width="6" />
                        <line x1="50" y1="45" x2="50" y2="100" stroke="#3b82f6" stroke-width="6" stroke-linecap="round"/>
                        <path d="M50 60 L80 85" stroke="#3b82f6" stroke-width="6" stroke-linecap="round" />
                        <path d="M50 100 L25 140 M50 100 L75 140" stroke="#3b82f6" stroke-width="6" stroke-linecap="round" />
                    </g>
                </svg>
            </div>

        </div>
    </main>

    <!-- KONTROL PANELƒ∞ (FOOTER) -->
    <footer class="w-full z-20 flex shadow-[0_-10px_20px_rgba(0,0,0,0.1)] shrink-0 h-1/3 max-h-52 bg-white">
        
        <!-- Kƒ±rmƒ±zƒ± Kontroller -->
        <div class="w-1/2 bg-red-50 p-2 md:p-4 flex flex-col justify-center items-center relative border-t-4 border-red-200">
            <div class="hidden md:block absolute top-2 left-4 text-red-900/40 font-bold text-sm">KLAVYE: A - S - D</div>
            <div class="grid grid-cols-3 gap-1 md:gap-3 w-full max-w-md h-full">
                <button onclick="handleAnswer('red', 'der')" class="game-btn active:scale-95 bg-red-500 border-b-4 border-red-800 rounded-lg md:rounded-xl text-white text-lg md:text-3xl font-black flex flex-col items-center justify-center shadow-md transition-all hover:bg-red-600">DER</button>
                <button onclick="handleAnswer('red', 'die')" class="game-btn active:scale-95 bg-red-500 border-b-4 border-red-800 rounded-lg md:rounded-xl text-white text-lg md:text-3xl font-black flex flex-col items-center justify-center shadow-md transition-all hover:bg-red-600">DIE</button>
                <button onclick="handleAnswer('red', 'das')" class="game-btn active:scale-95 bg-red-500 border-b-4 border-red-800 rounded-lg md:rounded-xl text-white text-lg md:text-3xl font-black flex flex-col items-center justify-center shadow-md transition-all hover:bg-red-600">DAS</button>
            </div>
        </div>

        <!-- Mavi Kontroller -->
        <div class="w-1/2 bg-blue-50 p-2 md:p-4 flex flex-col justify-center items-center relative border-t-4 border-blue-200">
            <div class="hidden md:block absolute top-2 right-4 text-blue-900/40 font-bold text-sm">KLAVYE: J - K - L</div>
            <div class="grid grid-cols-3 gap-1 md:gap-3 w-full max-w-md h-full">
                <button onclick="handleAnswer('blue', 'der')" class="game-btn active:scale-95 bg-blue-600 border-b-4 border-blue-900 rounded-lg md:rounded-xl text-white text-lg md:text-3xl font-black flex flex-col items-center justify-center shadow-md transition-all hover:bg-blue-700">DER</button>
                <button onclick="handleAnswer('blue', 'die')" class="game-btn active:scale-95 bg-blue-600 border-b-4 border-blue-900 rounded-lg md:rounded-xl text-white text-lg md:text-3xl font-black flex flex-col items-center justify-center shadow-md transition-all hover:bg-blue-700">DIE</button>
                <button onclick="handleAnswer('blue', 'das')" class="game-btn active:scale-95 bg-blue-600 border-b-4 border-blue-900 rounded-lg md:rounded-xl text-white text-lg md:text-3xl font-black flex flex-col items-center justify-center shadow-md transition-all hover:bg-blue-700">DAS</button>
            </div>
        </div>

    </footer>

    <!-- MODAL: OYUN SONU -->
    <div id="game-over-modal" class="hidden fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4">
        <div class="bg-white rounded-3xl p-6 md:p-8 text-center max-w-lg w-full border-8 border-yellow-400 shadow-2xl transform scale-110">
            <div id="winner-icon" class="text-6xl md:text-7xl mb-4 animate-bounce">üèÜ</div>
            <h2 id="winner-text" class="text-4xl md:text-5xl font-black mb-2 text-gray-800 uppercase italic">KAZANAN</h2>
            <p class="text-gray-500 font-bold mb-6">M√ºthi≈ü bir ma√ßtƒ±!</p>
            <button onclick="startGame()" class="w-full py-4 bg-green-500 hover:bg-green-600 text-white font-bold text-2xl rounded-2xl shadow-[0_6px_0_#15803d] active:translate-y-1 active:shadow-none transition-all">
                TEKRAR OYNA ‚Ü∫
            </button>
        </div>
    </div>

    <!-- MODAL: BA≈ûLANGI√á -->
    <div id="start-modal" class="fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4">
        <div class="bg-white rounded-3xl p-6 md:p-10 text-center max-w-lg w-full border-b-8 border-blue-500 relative overflow-hidden">
            <div class="absolute top-0 left-0 w-full h-4 bg-gradient-to-r from-red-500 to-blue-500"></div>
            <h1 class="text-5xl md:text-6xl font-black mb-1 text-gray-800 tracking-tighter">ARTIKEL</h1>
            <h1 class="text-5xl md:text-6xl font-black mb-6 text-transparent bg-clip-text bg-gradient-to-r from-red-600 to-blue-600 tracking-tighter">SAVA≈ûI</h1>
            
            <div class="bg-gray-100 p-4 rounded-xl mb-6 space-y-2 text-left text-sm md:text-base">
                <div class="flex items-center gap-2">
                    <span class="w-3 h-3 bg-red-500 rounded-full"></span>
                    <span class="font-bold text-gray-700">Kƒ±rmƒ±zƒ± Takƒ±m (Sol):</span>
                    <span class="text-gray-500">A, S, D tu≈ülarƒ±</span>
                </div>
                <div class="flex items-center gap-2">
                    <span class="w-3 h-3 bg-blue-500 rounded-full"></span>
                    <span class="font-bold text-gray-700">Mavi Takƒ±m (Saƒü):</span>
                    <span class="text-gray-500">J, K, L tu≈ülarƒ±</span>
                </div>
                <div class="text-xs text-gray-400 mt-2 italic text-center w-full">
                    *Hƒ±zlƒ± ve doƒüru cevap veren halatƒ± √ßeker!
                </div>
            </div>

            <button onclick="startGame()" class="w-full py-4 md:py-5 bg-gradient-to-r from-yellow-400 to-orange-400 hover:from-yellow-500 hover:to-orange-500 text-white font-black text-2xl md:text-3xl rounded-2xl shadow-[0_6px_0_#c2410c] active:translate-y-1 active:shadow-none transition-all transform hover:scale-[1.02]">
                BA≈ûLA!
            </button>
        </div>
    </div>

    <script>
        // --- VERƒ∞TABANI ---
        const words = [
            { word: "Apfel", article: "der" }, { word: "Baum", article: "der" }, { word: "Hund", article: "der" },
            { word: "Tisch", article: "der" }, { word: "Stuhl", article: "der" }, { word: "Vater", article: "der" },
            { word: "Computer", article: "der" }, { word: "Wagen", article: "der" }, { word: "Schl√ºssel", article: "der" },
            
            { word: "Katze", article: "die" }, { word: "Sonne", article: "die" }, { word: "Blume", article: "die" },
            { word: "Frau", article: "die" }, { word: "Mutter", article: "die" }, { word: "Lampe", article: "die" },
            { word: "Tasche", article: "die" }, { word: "Brille", article: "die" }, { word: "T√ºr", article: "die" },
            
            { word: "Haus", article: "das" }, { word: "Buch", article: "das" }, { word: "Auto", article: "das" },
            { word: "Kind", article: "das" }, { word: "Wasser", article: "das" }, { word: "Brot", article: "das" },
            { word: "Fenster", article: "das" }, { word: "Handy", article: "das" }, { word: "Geld", article: "das" }
        ];

        // --- OYUN DURUMU ---
        let gameState = {
            isPlaying: false,
            ropePosition: 50, // 0 = Kƒ±rmƒ±zƒ± Kazanƒ±r, 100 = Mavi Kazanƒ±r
            redWord: null,
            blueWord: null,
        };

        // --- DOM ELEMENTLERƒ∞ ---
        const ropeVisual = document.getElementById('rope-visual');
        const knotVisual = document.getElementById('knot-visual');
        const redTeam = document.getElementById('red-team');
        const blueTeam = document.getElementById('blue-team');
        const redCard = document.getElementById('red-card');
        const blueCard = document.getElementById('blue-card');
        const redWordDisplay = document.getElementById('red-word');
        const blueWordDisplay = document.getElementById('blue-word');

        // --- SES Sƒ∞STEMƒ∞ (Web Audio API) ---
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        
        function playSound(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            
            const now = audioCtx.currentTime;

            if (type === 'correct') {
                // Pozitif "Ding" Sesi
                osc.type = 'triangle';
                osc.frequency.setValueAtTime(500, now);
                osc.frequency.exponentialRampToValueAtTime(1000, now + 0.1);
                gain.gain.setValueAtTime(0.1, now);
                gain.gain.linearRampToValueAtTime(0, now + 0.2);
                osc.start(now);
                osc.stop(now + 0.2);
            } else if (type === 'wrong') {
                // Negatif "Bzzzt" Sesi
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(150, now);
                osc.frequency.linearRampToValueAtTime(100, now + 0.3);
                gain.gain.setValueAtTime(0.1, now);
                gain.gain.linearRampToValueAtTime(0, now + 0.3);
                osc.start(now);
                osc.stop(now + 0.3);
            } else if (type === 'win') {
                // Zafer Melodisi
                osc.type = 'square';
                osc.frequency.setValueAtTime(400, now);
                osc.frequency.setValueAtTime(600, now + 0.1);
                osc.frequency.setValueAtTime(800, now + 0.2);
                gain.gain.setValueAtTime(0.1, now);
                gain.gain.exponentialRampToValueAtTime(0.01, now + 0.6);
                osc.start(now);
                osc.stop(now + 0.6);
            }
        }

        // --- OYUN MANTIƒûI ---

        function startGame() {
            document.getElementById('start-modal').classList.add('hidden');
            document.getElementById('game-over-modal').classList.add('hidden');
            
            gameState.isPlaying = true;
            gameState.ropePosition = 50;
            
            updateVisuals();
            newWordFor('red');
            newWordFor('blue');
        }

        function newWordFor(team) {
            const randomWord = words[Math.floor(Math.random() * words.length)];
            
            if (team === 'red') {
                gameState.redWord = randomWord;
                redWordDisplay.innerText = randomWord.word;
                redCard.classList.remove('shake');
                redCard.classList.add('pop-in');
                setTimeout(() => redCard.classList.remove('pop-in'), 300);
            } else {
                gameState.blueWord = randomWord;
                blueWordDisplay.innerText = randomWord.word;
                blueCard.classList.remove('shake');
                blueCard.classList.add('pop-in');
                setTimeout(() => blueCard.classList.remove('pop-in'), 300);
            }
        }

        function handleAnswer(team, answer) {
            if (!gameState.isPlaying) return;

            const targetWord = (team === 'red') ? gameState.redWord : gameState.blueWord;
            const isCorrect = answer === targetWord.article;

            if (isCorrect) {
                playSound('correct');
                // Doƒüru cevap: Halatƒ± kendine √ßek (%6 g√º√ß)
                if (team === 'red') {
                    gameState.ropePosition -= 6; 
                } else {
                    gameState.ropePosition += 6; 
                }
                newWordFor(team);
            } else {
                playSound('wrong');
                // Yanlƒ±≈ü cevap: Halat kar≈üƒ±ya kayar (%3 ceza)
                if (team === 'red') {
                    gameState.ropePosition += 3;
                    redCard.classList.remove('shake');
                    void redCard.offsetWidth; // Reflow
                    redCard.classList.add('shake');
                } else {
                    gameState.ropePosition -= 3;
                    blueCard.classList.remove('shake');
                    void blueCard.offsetWidth;
                    blueCard.classList.add('shake');
                }
            }

            updateVisuals();
            checkWin();
        }

        function updateVisuals() {
            // Sƒ±nƒ±rlarƒ± kontrol et
            let pos = Math.max(0, Math.min(100, gameState.ropePosition));
            
            // 1. Halatƒ± g√ºncelle (CSS left √∂zelliƒüi)
            ropeVisual.style.left = pos + '%';

            // 2. Takƒ±mlarƒ± halatla birlikte hareket ettir
            // Mantƒ±k: Halat 50'den sapƒ±nca takƒ±mlar da o kadar sapmalƒ±.
            // 50 = Merkez. 
            // Eƒüer pos = 40 ise (Kƒ±rmƒ±zƒ± √ßekiyor), ofset = 10.
            // Kƒ±rmƒ±zƒ± takƒ±m daha geriye (sola), Mavi takƒ±m ileriye (sola) gider.
            
            const offset = 50 - pos; // Pozitif: Kƒ±rmƒ±zƒ± kazanƒ±yor, Negatif: Mavi kazanƒ±yor
            
            // Hareket katsayƒ±sƒ± (0.6 ile √ßarparak ekran dƒ±≈üƒ±na √ßok hƒ±zlƒ± √ßƒ±kmalarƒ±nƒ± engelliyoruz)
            const shift = offset * 0.6; 

            // Ba≈ülangƒ±√ß noktalarƒ±: Kƒ±rmƒ±zƒ± %10 solda, Mavi %10 saƒüda.
            // Sola kayma (Kƒ±rmƒ±zƒ± kazanƒ±yor) -> shift pozitif -> red left azalƒ±r, blue right artar(sola kayar).
            redTeam.style.left = `calc(10% - ${shift}%)`;
            blueTeam.style.right = `calc(10% + ${shift}%)`; 
            
            // D√ºƒü√ºm Rengi G√ºncelleme (Kim kazanƒ±yorsa onun rengine d√∂ner)
            if (pos < 45) knotVisual.className = "knot flex items-center justify-center bg-red-500 border-white";
            else if (pos > 55) knotVisual.className = "knot flex items-center justify-center bg-blue-600 border-white";
            else knotVisual.className = "knot flex items-center justify-center bg-gray-100 border-gray-400";
        }

        function checkWin() {
            if (gameState.ropePosition <= 10) {
                endGame('red');
            } else if (gameState.ropePosition >= 90) {
                endGame('blue');
            }
        }

        function endGame(winner) {
            gameState.isPlaying = false;
            playSound('win');
            
            const modal = document.getElementById('game-over-modal');
            const winnerText = document.getElementById('winner-text');
            const winnerIcon = document.getElementById('winner-icon');
            
            modal.classList.remove('hidden');
            
            if (winner === 'red') {
                winnerText.textContent = "KIRMIZI KAZANDI";
                winnerText.className = "text-4xl md:text-5xl font-black mb-2 text-red-600 uppercase italic";
                winnerIcon.className = "text-6xl md:text-7xl mb-4 text-red-500 animate-bounce";
            } else {
                winnerText.textContent = "MAVƒ∞ KAZANDI";
                winnerText.className = "text-4xl md:text-5xl font-black mb-2 text-blue-600 uppercase italic";
                winnerIcon.className = "text-6xl md:text-7xl mb-4 text-blue-500 animate-bounce";
            }
        }

        // --- KLAVYE Dƒ∞NLEYƒ∞Cƒ∞Sƒ∞ ---
        document.addEventListener('keydown', (e) => {
            if (!gameState.isPlaying) return;
            const key = e.key.toLowerCase();
            
            // Buton animasyonlarƒ±nƒ± tetiklemek i√ßin helper
            const triggerBtn = (team, type) => {
                // HTML'deki onclick fonksiyonuna g√∂re butonu bul
                const btn = document.querySelector(`button[onclick="handleAnswer('${team}', '${type}')"]`);
                if(btn) {
                    btn.click(); // ƒ∞≈ülemi yap
                    btn.classList.add('scale-90', 'bg-opacity-80'); // G√∂rsel efekt
                    setTimeout(() => btn.classList.remove('scale-90', 'bg-opacity-80'), 100);
                }
            };

            if (key === 'a') triggerBtn('red', 'der');
            if (key === 's') triggerBtn('red', 'die');
            if (key === 'd') triggerBtn('red', 'das');
            
            if (key === 'j') triggerBtn('blue', 'der');
            if (key === 'k') triggerBtn('blue', 'die');
            if (key === 'l') triggerBtn('blue', 'das');
        });

        // Ba≈ülangƒ±√ß Konumlandƒ±rmasƒ±
        updateVisuals();

    </script>
</body>
</html>
