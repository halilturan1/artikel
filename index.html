<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Almanca Artikel Sava≈üƒ±: 2 vs 2</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap');
        
        body {
            font-family: 'Fredoka', sans-serif;
            background-color: #4ade80;
            overflow: hidden;
            touch-action: manipulation;
            user-select: none;
        }

        /* Halat ve Zemin */
        .rope-container {
            position: relative;
            height: 16px;
            background: rgba(0,0,0,0.1);
            border-radius: 10px;
            width: 100%;
            margin-top: 60px; /* Karakterlerin el hizasƒ±na gelmesi i√ßin */
        }

        .rope {
            position: absolute;
            top: 50%;
            left: 50%; /* JS ile g√ºncellenecek */
            transform: translate(-50%, -50%);
            height: 14px;
            width: 120%; /* Ekrandan ta≈üsƒ±n */
            background: repeating-linear-gradient(45deg, #d4a373, #d4a373 10px, #a98467 10px, #a98467 20px);
            border-radius: 6px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            transition: left 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            z-index: 10;
        }

        .knot {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50px;
            height: 50px;
            background-color: #ef4444;
            border: 4px solid #fff;
            border-radius: 50%;
            z-index: 20;
            box-shadow: 0 4px 10px rgba(0,0,0,0.4);
        }

        /* Animasyonlu Karakterler (SVG) */
        .stickman {
            width: 80px;
            height: 120px;
            position: absolute;
            bottom: -20px; /* Halatƒ±n altƒ±na hizala */
            overflow: visible;
        }

        .stickman-body {
            transform-origin: 50% 90%; /* Ayaklardan g√º√ß al */
            animation: pull-action 1.5s infinite alternate ease-in-out;
        }

        .red-team-anim .stickman-body {
            animation-delay: 0s;
        }
        .red-team-anim:nth-child(2) .stickman-body {
            animation-delay: 0.3s;
        }

        .blue-team-anim .stickman-body {
            animation: pull-action-blue 1.5s infinite alternate ease-in-out;
        }
        .blue-team-anim:nth-child(2) .stickman-body {
            animation-delay: 0.3s;
        }

        @keyframes pull-action {
            0% { transform: rotate(10deg); }
            100% { transform: rotate(-20deg); } /* Geriye yaslanma */
        }

        @keyframes pull-action-blue {
            0% { transform: scaleX(-1) rotate(10deg); }
            100% { transform: scaleX(-1) rotate(-20deg); }
        }

        /* Kart Animasyonlarƒ± */
        .pop-in {
            animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes popIn {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .shake {
            animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both;
        }

        @keyframes shake {
            10%, 90% { transform: translate3d(-2px, 0, 0); }
            20%, 80% { transform: translate3d(4px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-6px, 0, 0); }
            40%, 60% { transform: translate3d(6px, 0, 0); }
        }

        /* √áim Dokusu */
        .grass-pattern {
            background-image: radial-gradient(#86efac 15%, transparent 16%), radial-gradient(#86efac 15%, transparent 16%);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            opacity: 0.4;
        }
    </style>
</head>
<body class="h-screen w-screen flex flex-col overflow-hidden bg-green-400">

    <!-- Arka Plan -->
    <div class="absolute inset-0 grass-pattern pointer-events-none"></div>

    <!-- √úst Bar -->
    <header class="z-20 w-full p-2 flex justify-between items-center bg-white/40 backdrop-blur-md shadow-sm">
        <div class="flex items-center gap-2">
            <div class="w-4 h-4 rounded-full bg-red-500 animate-pulse"></div>
            <span class="text-red-700 font-bold text-xl drop-shadow-sm">KIRMIZI</span>
        </div>
        <div class="text-white font-black text-2xl tracking-widest drop-shadow-lg bg-black/10 px-6 py-1 rounded-full">ARTIKEL SAVA≈ûI</div>
        <div class="flex items-center gap-2">
            <span class="text-blue-700 font-bold text-xl drop-shadow-sm">MAVƒ∞</span>
            <div class="w-4 h-4 rounded-full bg-blue-600 animate-pulse"></div>
        </div>
    </header>

    <!-- Oyun Alanƒ± (Split Screen Sorular) -->
    <main class="flex-grow w-full flex flex-col relative z-10">
        
        <!-- Soru Kartlarƒ± Alanƒ± -->
        <div class="flex justify-between w-full px-4 md:px-12 mt-4 md:mt-8 gap-4">
            
            <!-- Kƒ±rmƒ±zƒ± Takƒ±m Sorusu -->
            <div id="red-card" class="w-1/2 max-w-md bg-white rounded-3xl border-b-8 border-red-500 shadow-xl p-4 flex flex-col items-center transition-transform">
                <span class="text-xs font-bold text-red-400 uppercase tracking-widest mb-1">KIRMIZI SORU</span>
                <div id="red-word" class="text-3xl md:text-5xl font-black text-gray-800 text-center break-words">...</div>
            </div>

            <!-- VS ƒ∞konu (Dekoratif) -->
            <div class="absolute left-1/2 top-16 -translate-x-1/2 hidden md:flex items-center justify-center w-12 h-12 bg-yellow-400 rounded-full font-black text-yellow-800 shadow-lg border-2 border-white">VS</div>

            <!-- Mavi Takƒ±m Sorusu -->
            <div id="blue-card" class="w-1/2 max-w-md bg-white rounded-3xl border-b-8 border-blue-600 shadow-xl p-4 flex flex-col items-center transition-transform">
                <span class="text-xs font-bold text-blue-400 uppercase tracking-widest mb-1">MAVƒ∞ SORU</span>
                <div id="blue-word" class="text-3xl md:text-5xl font-black text-gray-800 text-center break-words">...</div>
            </div>
        </div>

        <!-- Halat ve Karakterler Sahnesi -->
        <div class="flex-grow flex items-center justify-center relative w-full overflow-hidden">
            
            <!-- Orta √áizgi -->
            <div class="absolute h-full w-2 bg-white/40 left-1/2 -translate-x-1/2 border-l border-r border-white/20 dashed"></div>

            <!-- Kƒ±rmƒ±zƒ± Takƒ±m Karakterleri (Sol) -->
            <div class="absolute left-[5%] md:left-[15%] top-1/2 -translate-y-1/2 z-10">
                <!-- Oyuncu 1 -->
                <svg class="stickman red-team-anim" style="right: 60px;" viewBox="0 0 100 150">
                    <g class="stickman-body">
                        <circle cx="50" cy="30" r="15" fill="none" stroke="#dc2626" stroke-width="6" /> <!-- Kafa -->
                        <line x1="50" y1="45" x2="50" y2="100" stroke="#dc2626" stroke-width="6" stroke-linecap="round"/> <!-- G√∂vde -->
                        <path d="M50 60 L80 80" stroke="#dc2626" stroke-width="6" stroke-linecap="round" /> <!-- Kol -->
                        <path d="M50 100 L30 140 M50 100 L70 140" stroke="#dc2626" stroke-width="6" stroke-linecap="round" /> <!-- Bacaklar -->
                    </g>
                </svg>
                <!-- Oyuncu 2 -->
                <svg class="stickman red-team-anim" style="right: 0;" viewBox="0 0 100 150">
                    <g class="stickman-body">
                        <circle cx="50" cy="30" r="15" fill="none" stroke="#ef4444" stroke-width="6" />
                        <line x1="50" y1="45" x2="50" y2="100" stroke="#ef4444" stroke-width="6" stroke-linecap="round"/>
                        <path d="M50 60 L80 80" stroke="#ef4444" stroke-width="6" stroke-linecap="round" />
                        <path d="M50 100 L30 140 M50 100 L70 140" stroke="#ef4444" stroke-width="6" stroke-linecap="round" />
                    </g>
                </svg>
            </div>

            <!-- Mavi Takƒ±m Karakterleri (Saƒü) -->
            <div class="absolute right-[5%] md:right-[15%] top-1/2 -translate-y-1/2 z-10">
                <!-- Oyuncu 1 -->
                <svg class="stickman blue-team-anim" style="left: 0;" viewBox="0 0 100 150">
                    <g class="stickman-body">
                        <circle cx="50" cy="30" r="15" fill="none" stroke="#2563eb" stroke-width="6" />
                        <line x1="50" y1="45" x2="50" y2="100" stroke="#2563eb" stroke-width="6" stroke-linecap="round"/>
                        <path d="M50 60 L80 80" stroke="#2563eb" stroke-width="6" stroke-linecap="round" />
                        <path d="M50 100 L30 140 M50 100 L70 140" stroke="#2563eb" stroke-width="6" stroke-linecap="round" />
                    </g>
                </svg>
                <!-- Oyuncu 2 -->
                <svg class="stickman blue-team-anim" style="left: 60px;" viewBox="0 0 100 150">
                    <g class="stickman-body">
                        <circle cx="50" cy="30" r="15" fill="none" stroke="#3b82f6" stroke-width="6" />
                        <line x1="50" y1="45" x2="50" y2="100" stroke="#3b82f6" stroke-width="6" stroke-linecap="round"/>
                        <path d="M50 60 L80 80" stroke="#3b82f6" stroke-width="6" stroke-linecap="round" />
                        <path d="M50 100 L30 140 M50 100 L70 140" stroke="#3b82f6" stroke-width="6" stroke-linecap="round" />
                    </g>
                </svg>
            </div>

            <!-- Halat -->
            <div class="rope-container w-full mx-0 relative">
                <div id="rope-visual" class="rope">
                    <div class="knot flex items-center justify-center">
                        <div class="w-2 h-2 bg-white rounded-full opacity-50"></div>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <!-- Kontrol Paneli -->
    <footer class="w-full h-1/3 z-20 flex shadow-[0_-10px_20px_rgba(0,0,0,0.1)]">
        
        <!-- Kƒ±rmƒ±zƒ± Kontroller -->
        <div class="w-1/2 bg-red-50 p-2 md:p-4 flex flex-col justify-center items-center relative border-t-4 border-red-200">
            <div class="hidden md:block absolute top-2 left-4 text-red-900/40 font-bold text-sm">KLAVYE: A - S - D</div>
            <div class="grid grid-cols-3 gap-2 w-full max-w-sm h-full max-h-32 md:max-h-40">
                <button onclick="handleAnswer('red', 'der')" class="active:scale-95 bg-red-500 border-b-4 border-red-800 rounded-xl text-white text-xl md:text-2xl font-black flex flex-col items-center justify-center shadow-lg transition-all hover:bg-red-600">DER<span class="text-[10px] opacity-70 font-normal">Erkek</span></button>
                <button onclick="handleAnswer('red', 'die')" class="active:scale-95 bg-red-500 border-b-4 border-red-800 rounded-xl text-white text-xl md:text-2xl font-black flex flex-col items-center justify-center shadow-lg transition-all hover:bg-red-600">DIE<span class="text-[10px] opacity-70 font-normal">Di≈üi</span></button>
                <button onclick="handleAnswer('red', 'das')" class="active:scale-95 bg-red-500 border-b-4 border-red-800 rounded-xl text-white text-xl md:text-2xl font-black flex flex-col items-center justify-center shadow-lg transition-all hover:bg-red-600">DAS<span class="text-[10px] opacity-70 font-normal">N√∂tr</span></button>
            </div>
        </div>

        <!-- Mavi Kontroller -->
        <div class="w-1/2 bg-blue-50 p-2 md:p-4 flex flex-col justify-center items-center relative border-t-4 border-blue-200">
            <div class="hidden md:block absolute top-2 right-4 text-blue-900/40 font-bold text-sm">KLAVYE: J - K - L</div>
            <div class="grid grid-cols-3 gap-2 w-full max-w-sm h-full max-h-32 md:max-h-40">
                <button onclick="handleAnswer('blue', 'der')" class="active:scale-95 bg-blue-600 border-b-4 border-blue-900 rounded-xl text-white text-xl md:text-2xl font-black flex flex-col items-center justify-center shadow-lg transition-all hover:bg-blue-700">DER<span class="text-[10px] opacity-70 font-normal">Erkek</span></button>
                <button onclick="handleAnswer('blue', 'die')" class="active:scale-95 bg-blue-600 border-b-4 border-blue-900 rounded-xl text-white text-xl md:text-2xl font-black flex flex-col items-center justify-center shadow-lg transition-all hover:bg-blue-700">DIE<span class="text-[10px] opacity-70 font-normal">Di≈üi</span></button>
                <button onclick="handleAnswer('blue', 'das')" class="active:scale-95 bg-blue-600 border-b-4 border-blue-900 rounded-xl text-white text-xl md:text-2xl font-black flex flex-col items-center justify-center shadow-lg transition-all hover:bg-blue-700">DAS<span class="text-[10px] opacity-70 font-normal">N√∂tr</span></button>
            </div>
        </div>

    </footer>

    <!-- Oyun Sonu Modal -->
    <div id="game-over-modal" class="hidden fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4">
        <div class="bg-white rounded-3xl p-8 text-center max-w-lg w-full border-8 border-yellow-400 shadow-2xl transform scale-110">
            <div id="winner-icon" class="text-7xl mb-4 animate-bounce">üèÜ</div>
            <h2 id="winner-text" class="text-5xl font-black mb-2 text-gray-800 uppercase italic">KAZANAN</h2>
            <p class="text-gray-500 font-bold mb-8">Oyun Bitti!</p>
            <button onclick="startGame()" class="w-full py-4 bg-green-500 hover:bg-green-600 text-white font-bold text-2xl rounded-2xl shadow-[0_6px_0_#15803d] active:translate-y-1 active:shadow-none transition-all">
                TEKRAR OYNA ‚Ü∫
            </button>
        </div>
    </div>

    <!-- Ba≈ülangƒ±√ß Modal -->
    <div id="start-modal" class="fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4">
        <div class="bg-white rounded-3xl p-8 text-center max-w-lg w-full border-b-8 border-blue-500 relative overflow-hidden">
            <div class="absolute top-0 left-0 w-full h-4 bg-gradient-to-r from-red-500 to-blue-500"></div>
            <h1 class="text-6xl font-black mb-1 text-gray-800 tracking-tighter">ARTIKEL</h1>
            <h1 class="text-6xl font-black mb-6 text-transparent bg-clip-text bg-gradient-to-r from-red-600 to-blue-600 tracking-tighter">SAVA≈ûI</h1>
            
            <div class="bg-gray-50 p-6 rounded-2xl mb-8 border border-gray-200 text-left space-y-3">
                <div class="flex items-center gap-3">
                    <span class="bg-red-100 text-red-600 font-bold px-2 py-1 rounded text-xs">SOL TAKIM</span>
                    <p class="text-sm text-gray-600">Kendi sorusunu √ß√∂zer. <br><span class="font-bold">Tu≈ülar:</span> A, S, D</p>
                </div>
                <div class="w-full h-px bg-gray-200"></div>
                <div class="flex items-center gap-3">
                    <span class="bg-blue-100 text-blue-600 font-bold px-2 py-1 rounded text-xs">SAƒû TAKIM</span>
                    <p class="text-sm text-gray-600">Kendi sorusunu √ß√∂zer. <br><span class="font-bold">Tu≈ülar:</span> J, K, L</p>
                </div>
            </div>

            <button onclick="startGame()" class="w-full py-5 bg-gradient-to-r from-yellow-400 to-orange-400 hover:from-yellow-500 hover:to-orange-500 text-white font-black text-3xl rounded-2xl shadow-[0_6px_0_#c2410c] active:translate-y-1 active:shadow-none transition-all transform hover:scale-[1.02]">
                BA≈ûLA!
            </button>
        </div>
    </div>

    <script>
        // Veritabanƒ±
        const words = [
            { word: "Apfel", article: "der" }, { word: "Baum", article: "der" }, { word: "Hund", article: "der" },
            { word: "Tisch", article: "der" }, { word: "Stuhl", article: "der" }, { word: "Vater", article: "der" },
            { word: "Mond", article: "der" }, { word: "L√∂ffel", article: "der" }, { word: "Computer", article: "der" },
            { word: "Wagen", article: "der" }, { word: "Ball", article: "der" }, { word: "Schl√ºssel", article: "der" },
            
            { word: "Katze", article: "die" }, { word: "Sonne", article: "die" }, { word: "Blume", article: "die" },
            { word: "Frau", article: "die" }, { word: "Mutter", article: "die" }, { word: "Lampe", article: "die" },
            { word: "Banane", article: "die" }, { word: "Schule", article: "die" }, { word: "Tasche", article: "die" },
            { word: "Brille", article: "die" }, { word: "Uhr", article: "die" }, { word: "T√ºr", article: "die" },
            
            { word: "Haus", article: "das" }, { word: "Buch", article: "das" }, { word: "Auto", article: "das" },
            { word: "Kind", article: "das" }, { word: "Wasser", article: "das" }, { word: "Brot", article: "das" },
            { word: "Fenster", article: "das" }, { word: "Bett", article: "das" }, { word: "Spiel", article: "das" },
            { word: "Handy", article: "das" }, { word: "Bild", article: "das" }, { word: "Geld", article: "das" }
        ];

        let gameState = {
            isPlaying: false,
            ropePosition: 50, // 50 = merkez
            redWord: null,
            blueWord: null,
        };

        const ropeVisual = document.getElementById('rope-visual');
        const redCard = document.getElementById('red-card');
        const blueCard = document.getElementById('blue-card');
        const redWordDisplay = document.getElementById('red-word');
        const blueWordDisplay = document.getElementById('blue-word');

        // Ses Efektleri
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        
        function playSound(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            
            const now = audioCtx.currentTime;

            if (type === 'correct') {
                osc.type = 'triangle';
                osc.frequency.setValueAtTime(440, now);
                osc.frequency.exponentialRampToValueAtTime(880, now + 0.1);
                gain.gain.setValueAtTime(0.2, now);
                gain.gain.linearRampToValueAtTime(0, now + 0.2);
                osc.start(now);
                osc.stop(now + 0.2);
            } else if (type === 'wrong') {
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(150, now);
                osc.frequency.linearRampToValueAtTime(100, now + 0.3);
                gain.gain.setValueAtTime(0.2, now);
                gain.gain.linearRampToValueAtTime(0, now + 0.3);
                osc.start(now);
                osc.stop(now + 0.3);
            } else if (type === 'win') {
                osc.type = 'square';
                osc.frequency.setValueAtTime(523.25, now);
                osc.frequency.setValueAtTime(659.25, now + 0.1);
                osc.frequency.setValueAtTime(783.99, now + 0.2);
                osc.frequency.setValueAtTime(1046.50, now + 0.4);
                gain.gain.setValueAtTime(0.2, now);
                gain.gain.exponentialRampToValueAtTime(0.01, now + 1);
                osc.start(now);
                osc.stop(now + 1);
            }
        }

        function startGame() {
            document.getElementById('start-modal').classList.add('hidden');
            document.getElementById('game-over-modal').classList.add('hidden');
            
            gameState.isPlaying = true;
            gameState.ropePosition = 50;
            
            updateRopeVisual();
            newWordFor('red');
            newWordFor('blue');
        }

        function newWordFor(team) {
            const randomWord = words[Math.floor(Math.random() * words.length)];
            
            if (team === 'red') {
                gameState.redWord = randomWord;
                redWordDisplay.innerText = randomWord.word;
                redCard.classList.remove('shake');
                redCard.classList.add('pop-in');
                setTimeout(() => redCard.classList.remove('pop-in'), 300);
            } else {
                gameState.blueWord = randomWord;
                blueWordDisplay.innerText = randomWord.word;
                blueCard.classList.remove('shake');
                blueCard.classList.add('pop-in');
                setTimeout(() => blueCard.classList.remove('pop-in'), 300);
            }
        }

        function handleAnswer(team, answer) {
            if (!gameState.isPlaying) return;

            const targetWord = (team === 'red') ? gameState.redWord : gameState.blueWord;
            const isCorrect = answer === targetWord.article;

            if (isCorrect) {
                playSound('correct');
                
                // Halatƒ± hareket ettir
                if (team === 'red') {
                    gameState.ropePosition -= 7; // Kƒ±rmƒ±zƒ±ya √ßek
                } else {
                    gameState.ropePosition += 7; // Maviye √ßek
                }

                // Bildiƒüi i√ßin yeni kelime ver
                newWordFor(team);
            } else {
                playSound('wrong');
                
                // Yanlƒ±≈ü cevap cezasƒ± (Hafif√ße kar≈üƒ±ya iter)
                if (team === 'red') {
                    gameState.ropePosition += 3;
                    redCard.classList.remove('shake');
                    void redCard.offsetWidth;
                    redCard.classList.add('shake');
                } else {
                    gameState.ropePosition -= 3;
                    blueCard.classList.remove('shake');
                    void blueCard.offsetWidth;
                    blueCard.classList.add('shake');
                }
            }

            updateRopeVisual();
            checkWin();
        }

        function updateRopeVisual() {
            // Sƒ±nƒ±rlarƒ± kontrol et (g√∂rsel olarak halatƒ±n ekrandan kopmamasƒ± i√ßin)
            let visualPos = Math.max(0, Math.min(100, gameState.ropePosition));
            ropeVisual.style.left = visualPos + '%';
        }

        function checkWin() {
            if (gameState.ropePosition <= 10) {
                endGame('red');
            } else if (gameState.ropePosition >= 90) {
                endGame('blue');
            }
        }

        function endGame(winner) {
            gameState.isPlaying = false;
            playSound('win');
            
            const modal = document.getElementById('game-over-modal');
            const winnerText = document.getElementById('winner-text');
            const winnerIcon = document.getElementById('winner-icon');
            
            modal.classList.remove('hidden');
            
            if (winner === 'red') {
                winnerText.textContent = "KIRMIZI KAZANDI";
                winnerText.className = "text-5xl font-black mb-2 text-red-600 uppercase italic";
                winnerIcon.className = "text-7xl mb-4 text-red-500 animate-bounce";
            } else {
                winnerText.textContent = "MAVƒ∞ KAZANDI";
                winnerText.className = "text-5xl font-black mb-2 text-blue-600 uppercase italic";
                winnerIcon.className = "text-7xl mb-4 text-blue-500 animate-bounce";
            }
        }

        // Klavye Kontrolleri
        document.addEventListener('keydown', (e) => {
            if (!gameState.isPlaying) return;
            const key = e.key.toLowerCase();
            
            // Kƒ±rmƒ±zƒ± (A, S, D)
            if (['a','s','d'].includes(key)) {
                const btn = document.querySelector(`button[onclick="handleAnswer('red', '${key === 'a' ? 'der' : key === 's' ? 'die' : 'das'}')"]`);
                if(btn) {
                    btn.click();
                    btn.classList.add('scale-95');
                    setTimeout(()=> btn.classList.remove('scale-95'), 100);
                }
            }
            
            // Mavi (J, K, L)
            if (['j','k','l'].includes(key)) {
                const btn = document.querySelector(`button[onclick="handleAnswer('blue', '${key === 'j' ? 'der' : key === 'k' ? 'die' : 'das'}')"]`);
                if(btn) {
                    btn.click();
                    btn.classList.add('scale-95');
                    setTimeout(()=> btn.classList.remove('scale-95'), 100);
                }
            }
        });

    </script>
</body>
</html>
